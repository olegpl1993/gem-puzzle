(()=>{"use strict";function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var n=document.createElement("div");n.classList.add("gemPuzzle"),document.body.appendChild(n);var a=document.createElement("div");a.classList.add("gemPuzzle__buttonLine"),n.appendChild(a);var l=document.createElement("div");l.classList.add("gemPuzzle__button"),l.textContent="Restart",a.appendChild(l);var i=document.createElement("div");i.classList.add("gemPuzzle__button"),i.classList.add("_active"),i.textContent="Sound",a.appendChild(i);var c=document.createElement("div");c.classList.add("gemPuzzle__button"),c.textContent="Save",a.appendChild(c);var d=document.createElement("div");d.classList.add("gemPuzzle__button"),d.textContent="Load",a.appendChild(d);var s=document.createElement("div");s.classList.add("gemPuzzle__button"),s.textContent="Results",a.appendChild(s);var o=document.createElement("div");o.classList.add("gemPuzzle__statLine"),n.appendChild(o);var r=document.createElement("div");r.classList.add("gemPuzzle__movesBox"),o.appendChild(r);var u=document.createElement("div");u.classList.add("gemPuzzle__movesText"),u.textContent="Moves:",r.appendChild(u);var v=document.createElement("div");v.classList.add("gemPuzzle__movesNum"),v.textContent="0",r.appendChild(v);var m=document.createElement("div");m.classList.add("gemPuzzle__timeBox"),o.appendChild(m);var p=document.createElement("div");p.classList.add("gemPuzzle__timeText"),p.textContent="Time:",m.appendChild(p);var L=document.createElement("div");L.classList.add("gemPuzzle__timeNum"),L.textContent="0:00",m.appendChild(L);var f=document.createElement("div");f.classList.add("gemPuzzle__gameBox"),n.appendChild(f);var z=document.createElement("div");z.classList.add("gemPuzzle__popupWin"),n.appendChild(z);var g=document.createElement("div");g.classList.add("gemPuzzle__popupRes"),n.appendChild(g);var _=document.createElement("div");_.classList.add("gemPuzzle__choiceLine"),n.appendChild(_);var h=document.createElement("div");h.classList.add("gemPuzzle__choiseText"),h.textContent="Size:",_.appendChild(h);var C=document.createElement("div");C.classList.add("gemPuzzle__button"),C.textContent="3x3",_.appendChild(C);var x=document.createElement("div");x.classList.add("gemPuzzle__button"),x.classList.add("_active"),x.textContent="4x4",_.appendChild(x);var S=document.createElement("div");S.classList.add("gemPuzzle__button"),S.textContent="5x5",_.appendChild(S);var E=document.createElement("div");E.classList.add("gemPuzzle__button"),E.textContent="6x6",_.appendChild(E);var y=document.createElement("div");y.classList.add("gemPuzzle__button"),y.textContent="7x7",_.appendChild(y);var P=document.createElement("div");P.classList.add("gemPuzzle__button"),P.textContent="8x8",_.appendChild(P);var I,b,w,q=[{left:0,top:0,value:0}],M=[],N={moves:0,time:0,gameBoxSize:400,cellSize:100,cellInLine:4,cellquantity:15};function k(e){if(Number.isNaN(e))return"0:00";var t=parseInt(e),n=parseInt(t/60);t-=60*n;var a=parseInt(n/60);return n-=60*a,0===a?"".concat(n,":").concat(String(t%60).padStart(2,0)):"".concat(String(a).padStart(2,0),":").concat(n,":").concat(String(t%60).padStart(2,0))}function T(){var e=window.innerWidth;N.gameBoxSize=e<600?e-6:594,f.style.width="".concat(N.gameBoxSize,"px"),f.style.height="".concat(N.gameBoxSize,"px"),N.cellSize=N.gameBoxSize/N.cellInLine}function A(){clearInterval(I),N.time=0,L.textContent="0:00"}function B(){N.moves=0,v.textContent=N.moves}function O(e){var t=q[e],n=q[0];if(Math.abs(n.left-t.left)+Math.abs(n.top-t.top)===1){t.element.style.left="".concat(n.left*N.cellSize,"px"),t.element.style.top="".concat(n.top*N.cellSize,"px");var a=n.left,l=n.top;n.left=t.left,n.top=t.top,t.left=a,t.top=l,N.moves+=1,v.textContent=N.moves,i.classList.contains("_active")&&new Audio("assets/audio/sound.53b1fa8d370929f152e4d4d5d37c1359.mp3").play(),function(){for(var e=1;e<=N.cellquantity;e+=1)if(q[e].value!==q[e].top*N.cellInLine+q[e].left+1)return;setTimeout((function(){for(z.textContent="Hooray! You solved the puzzle in ".concat(k(N.time)," and ").concat(N.moves," moves!"),z.classList.add("_active"),M.unshift({sCell:N.cellInLine,sTime:N.time,sMoves:N.moves}),M.length>10&&M.pop(),B(),A();f.firstChild;)f.removeChild(f.firstChild)}),200)}()}}function J(e){w=e}function R(e){b===f&&O(e),b=void 0,f.classList.remove("_active"),f.classList.remove("_deactive")}function H(){for(T(),z.classList.remove("_active"),q=[{left:0,top:0,value:0}];f.firstChild;)f.removeChild(f.firstChild);B(),A(),I=setInterval((function(){N.time+=1,L.textContent=k(N.time)}),1e3),function(){for(var t=function(){for(;;){for(var t=e(Array(N.cellquantity).keys()).map((function(e){return e+1})).sort((function(){return Math.random()-.5})),n=N.cellquantity%2,a=0;a<t.length;a+=1)for(var l=a;l<t.length;l+=1)t[l]<t[a]&&(n+=1);if(n%2==0)return t}}(),n=function(e){var n=document.createElement("div");n.classList.add("gemPuzzle__cell");var a=t[e-1];n.textContent=a,n.style.width="".concat(N.cellSize,"px"),n.style.height="".concat(N.cellSize,"px");var l=e%N.cellInLine,i=(e-l)/N.cellInLine;n.style.left="".concat(l*N.cellSize,"px"),n.style.top="".concat(i*N.cellSize,"px"),f.appendChild(n),q.push({left:l,top:i,element:n,value:a}),n.draggable="true",n.addEventListener("dragend",(function(){R(e)})),n.addEventListener("dragstart",(function(){J(e)})),n.addEventListener("click",(function(){return O(e)}))},a=1;a<=N.cellquantity;a+=1)n(a)}()}function j(){C.classList.remove("_active"),x.classList.remove("_active"),S.classList.remove("_active"),E.classList.remove("_active"),y.classList.remove("_active"),P.classList.remove("_active")}function G(){for(;f.firstChild;)f.removeChild(f.firstChild);T();for(var e=function(e){var t=document.createElement("div");t.classList.add("gemPuzzle__cell");var n=q[e].value;t.textContent=n,t.style.width="".concat(N.cellSize,"px"),t.style.height="".concat(N.cellSize,"px");var a=q[e].left,l=q[e].top;t.style.left="".concat(a*N.cellSize,"px"),t.style.top="".concat(l*N.cellSize,"px"),f.appendChild(t),q[e]={left:a,top:l,element:t,value:n},t.draggable="true",t.addEventListener("dragend",(function(){R(e)})),t.addEventListener("dragstart",(function(){J(e)})),t.addEventListener("click",(function(){return O(e)}))},t=1;t<=N.cellquantity;t+=1)e(t)}window.addEventListener("beforeunload",(function(){localStorage.setItem("gemPuzzleResults",JSON.stringify(M))})),window.addEventListener("load",(function(){localStorage.getItem("gemPuzzleResults")&&(M=JSON.parse(localStorage.getItem("gemPuzzleResults")))})),s.addEventListener("click",(function(){g.innerHTML+="<div>Last games<div>",M.forEach((function(e,t){g.innerHTML+="<div>".concat(t+1,". Size ").concat(e.sCell,"x").concat(e.sCell," time ").concat(k(e.sTime)," moves ").concat(e.sMoves,"</div>")})),g.classList.add("_active")})),g.addEventListener("click",(function(){g.classList.remove("_active"),g.innerHTML=""})),i.addEventListener("click",(function(){i.classList.toggle("_active")})),f.addEventListener("dragover",(function(e){!function(e){e.preventDefault(),b=e.target;var t=q[w],n=q[0];Math.abs(n.left-t.left)+Math.abs(n.top-t.top)===1&&b===f?(f.classList.add("_active"),f.classList.remove("_deactive")):(f.classList.remove("_active"),f.classList.add("_deactive"))}(e)})),l.addEventListener("click",H),_.childNodes.forEach((function(e){e.addEventListener("click",(function(e){var t;(t=e.target)===C&&(j(),C.classList.add("_active"),N.cellInLine=3,N.cellquantity=8,H()),t===x&&(j(),x.classList.add("_active"),N.cellInLine=4,N.cellquantity=15,H()),t===S&&(j(),S.classList.add("_active"),N.cellInLine=5,N.cellquantity=24,H()),t===E&&(j(),E.classList.add("_active"),N.cellInLine=6,N.cellquantity=35,H()),t===y&&(j(),y.classList.add("_active"),N.cellInLine=7,N.cellquantity=48,H()),t===P&&(j(),P.classList.add("_active"),N.cellInLine=8,N.cellquantity=63,H())}))})),c.addEventListener("click",(function(){localStorage.setItem("gemPuzzleCells",JSON.stringify(q)),localStorage.setItem("gemPuzzleGameSet",JSON.stringify(N))})),d.addEventListener("click",(function(){localStorage.getItem("gemPuzzleCells")&&localStorage.getItem("gemPuzzleGameSet")&&(q=JSON.parse(localStorage.getItem("gemPuzzleCells")),N=JSON.parse(localStorage.getItem("gemPuzzleGameSet"))),j(),3===N.cellInLine&&C.classList.add("_active"),4===N.cellInLine&&x.classList.add("_active"),5===N.cellInLine&&S.classList.add("_active"),6===N.cellInLine&&E.classList.add("_active"),7===N.cellInLine&&y.classList.add("_active"),8===N.cellInLine&&P.classList.add("_active"),v.textContent=N.moves,G()})),z.addEventListener("click",H),window.addEventListener("load",H),window.addEventListener("resize",G)})();
//# sourceMappingURL=main.ec70779e531515054dda.js.map